{"ast":null,"code":"import _slicedToArray from\"D:/Belajar/typing-test/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState,useRef}from\"react\";import styles from\"stylesheets/CommandPallet.module.scss\";import{options}from\"./Header\";import{useDispatch}from\"react-redux\";import{setTime,setTheme,setType}from\"store/actions\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function CommandPallet(props){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),palletText=_useState2[0],setPalletText=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),selectedOption=_useState4[0],setSelectedOption=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),highlightedOption=_useState6[0],setHighlightedOption=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),commandList=_useState8[0],setCommandList=_useState8[1];var dispatch=useDispatch();var palletTextBox=useRef(null);useEffect(function(){document.onclick=function(){props.setShowPallet(function(s){return!s;});console.log(\"heere\");};return function(){document.onclick=null;};},[props]);useEffect(function(){if(!selectedOption){setCommandList(Object.keys(options).filter(function(option){return option.includes(palletText.toLowerCase());}));}else{var commands=options[selectedOption].map(function(o){return o.toString();});setCommandList(commands.filter(function(option){return option.includes(palletText.toLowerCase());}));}setHighlightedOption(0);},[palletText,selectedOption]);var handleCommandSelection=function handleCommandSelection(command){setPalletText(\"\");if(!command)return;if(!selectedOption){setSelectedOption(command);return;}switch(selectedOption){case\"time\":dispatch(setTime(+command));break;case\"theme\":dispatch(setTheme(command));break;case\"type\":dispatch(setType(command));break;default:console.log(selectedOption,command);}props.setShowPallet(false);};var handlePalletKeys=function handlePalletKeys(e){if(e.key===\"ArrowUp\"){setHighlightedOption(function(op){return op>0?op-1:op;});}else if(e.key===\"ArrowDown\"){setHighlightedOption(function(op){return op<commandList.length-1?op+1:op;});}else if(e.key===\"Enter\"){var command=commandList[highlightedOption];handleCommandSelection(command);}else if(e.key===\"Escape\"){props.setShowPallet(false);}e.stopPropagation();};return/*#__PURE__*/_jsxs(\"div\",{className:styles.commandPallet,onKeyDown:handlePalletKeys,onClick:function onClick(e){return e.stopPropagation();},children:[/*#__PURE__*/_jsx(\"input\",{ref:palletTextBox,type:\"text\",className:styles.commandInput,placeholder:\"Type to search\",value:palletText,autoFocus:true,onChange:function onChange(e){return setPalletText(e.target.value);}}),/*#__PURE__*/_jsx(\"div\",{className:styles.commandList,children:commandList.map(function(option,idx){return/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(styles.command,\" \").concat(highlightedOption===idx&&styles.highlighted),onClick:function onClick(){return handleCommandSelection(option);},children:option},idx);})})]});}","map":{"version":3,"names":["useEffect","useState","useRef","styles","options","useDispatch","setTime","setTheme","setType","CommandPallet","props","palletText","setPalletText","selectedOption","setSelectedOption","highlightedOption","setHighlightedOption","commandList","setCommandList","dispatch","palletTextBox","document","onclick","setShowPallet","s","console","log","Object","keys","filter","option","includes","toLowerCase","commands","map","o","toString","handleCommandSelection","command","handlePalletKeys","e","key","op","length","stopPropagation","commandPallet","commandInput","target","value","idx","highlighted"],"sources":["D:/Belajar/typing-test/src/components/CommandPallet.tsx"],"sourcesContent":["import { KeyboardEvent, useEffect, useState, useRef } from \"react\";\r\nimport styles from \"stylesheets/CommandPallet.module.scss\";\r\nimport { options, Options } from \"./Header\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { setTime, setTheme, setType } from \"store/actions\";\r\n\r\ninterface Props {\r\n    setShowPallet: Function;\r\n}\r\n\r\nexport default function CommandPallet(props: Props) {\r\n    const [palletText, setPalletText] = useState(\"\");\r\n    const [selectedOption, setSelectedOption] = useState(\"\");\r\n    const [highlightedOption, setHighlightedOption] = useState(0);\r\n    const [commandList, setCommandList] = useState<string[]>([]);\r\n    const dispatch = useDispatch();\r\n    const palletTextBox = useRef<HTMLInputElement>(null);\r\n\r\n    useEffect(() => {\r\n        document.onclick = () => {\r\n            props.setShowPallet((s: boolean) => !s);\r\n            console.log(\"heere\");\r\n        };\r\n        return () => {\r\n            document.onclick = null;\r\n        };\r\n    }, [props]);\r\n\r\n    useEffect(() => {\r\n        if (!selectedOption) {\r\n            setCommandList(\r\n                Object.keys(options).filter((option) =>\r\n                    option.includes(palletText.toLowerCase())\r\n                )\r\n            );\r\n        } else {\r\n            const commands: Array<string> = options[\r\n                selectedOption as keyof Options\r\n            ].map((o) => o.toString());\r\n            setCommandList(\r\n                commands.filter((option: string) =>\r\n                    option.includes(palletText.toLowerCase())\r\n                )\r\n            );\r\n        }\r\n        setHighlightedOption(0);\r\n    }, [palletText, selectedOption]);\r\n\r\n    const handleCommandSelection = (command: string) => {\r\n        setPalletText(\"\");\r\n        if (!command) return;\r\n        if (!selectedOption) {\r\n            setSelectedOption(command);\r\n            return;\r\n        }\r\n        switch (selectedOption) {\r\n            case \"time\":\r\n                dispatch(setTime(+command));\r\n                break;\r\n            case \"theme\":\r\n                dispatch(setTheme(command));\r\n                break;\r\n            case \"type\":\r\n                dispatch(setType(command));\r\n                break;\r\n            default:\r\n                console.log(selectedOption, command);\r\n        }\r\n        props.setShowPallet(false);\r\n    };\r\n\r\n    const handlePalletKeys = (e: KeyboardEvent) => {\r\n        if (e.key === \"ArrowUp\") {\r\n            setHighlightedOption((op) => (op > 0 ? op - 1 : op));\r\n        } else if (e.key === \"ArrowDown\") {\r\n            setHighlightedOption((op) =>\r\n                op < commandList.length - 1 ? op + 1 : op\r\n            );\r\n        } else if (e.key === \"Enter\") {\r\n            const command = commandList[highlightedOption];\r\n            handleCommandSelection(command);\r\n        } else if (e.key === \"Escape\") {\r\n            props.setShowPallet(false);\r\n        }\r\n        e.stopPropagation();\r\n    };\r\n\r\n    return (\r\n        <div\r\n            className={styles.commandPallet}\r\n            onKeyDown={handlePalletKeys}\r\n            onClick={(e) => e.stopPropagation()}>\r\n            <input\r\n                ref={palletTextBox}\r\n                type=\"text\"\r\n                className={styles.commandInput}\r\n                placeholder=\"Type to search\"\r\n                value={palletText}\r\n                autoFocus\r\n                onChange={(e) => setPalletText(e.target.value)}\r\n            />\r\n            <div className={styles.commandList}>\r\n                {commandList!.map((option, idx) => (\r\n                    <div\r\n                        className={`${styles.command} ${\r\n                            highlightedOption === idx && styles.highlighted\r\n                        }`}\r\n                        key={idx}\r\n                        onClick={() => handleCommandSelection(option)}>\r\n                        {option}\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":"4GAAA,OAAwBA,SAAS,CAAEC,QAAQ,CAAEC,MAAM,KAAQ,OAAO,CAClE,MAAOC,OAAM,KAAM,uCAAuC,CAC1D,OAASC,OAAO,KAAiB,UAAU,CAC3C,OAASC,WAAW,KAAQ,aAAa,CACzC,OAASC,OAAO,CAAEC,QAAQ,CAAEC,OAAO,KAAQ,eAAe,CAAC,wFAM3D,cAAe,SAASC,cAAa,CAACC,KAAY,CAAE,CAChD,cAAoCT,QAAQ,CAAC,EAAE,CAAC,wCAAzCU,UAAU,eAAEC,aAAa,eAChC,eAA4CX,QAAQ,CAAC,EAAE,CAAC,yCAAjDY,cAAc,eAAEC,iBAAiB,eACxC,eAAkDb,QAAQ,CAAC,CAAC,CAAC,yCAAtDc,iBAAiB,eAAEC,oBAAoB,eAC9C,eAAsCf,QAAQ,CAAW,EAAE,CAAC,yCAArDgB,WAAW,eAAEC,cAAc,eAClC,GAAMC,SAAQ,CAAGd,WAAW,EAAE,CAC9B,GAAMe,cAAa,CAAGlB,MAAM,CAAmB,IAAI,CAAC,CAEpDF,SAAS,CAAC,UAAM,CACZqB,QAAQ,CAACC,OAAO,CAAG,UAAM,CACrBZ,KAAK,CAACa,aAAa,CAAC,SAACC,CAAU,QAAK,CAACA,CAAC,GAAC,CACvCC,OAAO,CAACC,GAAG,CAAC,OAAO,CAAC,CACxB,CAAC,CACD,MAAO,WAAM,CACTL,QAAQ,CAACC,OAAO,CAAG,IAAI,CAC3B,CAAC,CACL,CAAC,CAAE,CAACZ,KAAK,CAAC,CAAC,CAEXV,SAAS,CAAC,UAAM,CACZ,GAAI,CAACa,cAAc,CAAE,CACjBK,cAAc,CACVS,MAAM,CAACC,IAAI,CAACxB,OAAO,CAAC,CAACyB,MAAM,CAAC,SAACC,MAAM,QAC/BA,OAAM,CAACC,QAAQ,CAACpB,UAAU,CAACqB,WAAW,EAAE,CAAC,GAC5C,CACJ,CACL,CAAC,IAAM,CACH,GAAMC,SAAuB,CAAG7B,OAAO,CACnCS,cAAc,CACjB,CAACqB,GAAG,CAAC,SAACC,CAAC,QAAKA,EAAC,CAACC,QAAQ,EAAE,GAAC,CAC1BlB,cAAc,CACVe,QAAQ,CAACJ,MAAM,CAAC,SAACC,MAAc,QAC3BA,OAAM,CAACC,QAAQ,CAACpB,UAAU,CAACqB,WAAW,EAAE,CAAC,GAC5C,CACJ,CACL,CACAhB,oBAAoB,CAAC,CAAC,CAAC,CAC3B,CAAC,CAAE,CAACL,UAAU,CAAEE,cAAc,CAAC,CAAC,CAEhC,GAAMwB,uBAAsB,CAAG,QAAzBA,uBAAsB,CAAIC,OAAe,CAAK,CAChD1B,aAAa,CAAC,EAAE,CAAC,CACjB,GAAI,CAAC0B,OAAO,CAAE,OACd,GAAI,CAACzB,cAAc,CAAE,CACjBC,iBAAiB,CAACwB,OAAO,CAAC,CAC1B,OACJ,CACA,OAAQzB,cAAc,EAClB,IAAK,MAAM,CACPM,QAAQ,CAACb,OAAO,CAAC,CAACgC,OAAO,CAAC,CAAC,CAC3B,MACJ,IAAK,OAAO,CACRnB,QAAQ,CAACZ,QAAQ,CAAC+B,OAAO,CAAC,CAAC,CAC3B,MACJ,IAAK,MAAM,CACPnB,QAAQ,CAACX,OAAO,CAAC8B,OAAO,CAAC,CAAC,CAC1B,MACJ,QACIb,OAAO,CAACC,GAAG,CAACb,cAAc,CAAEyB,OAAO,CAAC,CAAC,CAE7C5B,KAAK,CAACa,aAAa,CAAC,KAAK,CAAC,CAC9B,CAAC,CAED,GAAMgB,iBAAgB,CAAG,QAAnBA,iBAAgB,CAAIC,CAAgB,CAAK,CAC3C,GAAIA,CAAC,CAACC,GAAG,GAAK,SAAS,CAAE,CACrBzB,oBAAoB,CAAC,SAAC0B,EAAE,QAAMA,GAAE,CAAG,CAAC,CAAGA,EAAE,CAAG,CAAC,CAAGA,EAAE,EAAC,CAAC,CACxD,CAAC,IAAM,IAAIF,CAAC,CAACC,GAAG,GAAK,WAAW,CAAE,CAC9BzB,oBAAoB,CAAC,SAAC0B,EAAE,QACpBA,GAAE,CAAGzB,WAAW,CAAC0B,MAAM,CAAG,CAAC,CAAGD,EAAE,CAAG,CAAC,CAAGA,EAAE,GAC5C,CACL,CAAC,IAAM,IAAIF,CAAC,CAACC,GAAG,GAAK,OAAO,CAAE,CAC1B,GAAMH,QAAO,CAAGrB,WAAW,CAACF,iBAAiB,CAAC,CAC9CsB,sBAAsB,CAACC,OAAO,CAAC,CACnC,CAAC,IAAM,IAAIE,CAAC,CAACC,GAAG,GAAK,QAAQ,CAAE,CAC3B/B,KAAK,CAACa,aAAa,CAAC,KAAK,CAAC,CAC9B,CACAiB,CAAC,CAACI,eAAe,EAAE,CACvB,CAAC,CAED,mBACI,aACI,SAAS,CAAEzC,MAAM,CAAC0C,aAAc,CAChC,SAAS,CAAEN,gBAAiB,CAC5B,OAAO,CAAE,iBAACC,CAAC,QAAKA,EAAC,CAACI,eAAe,EAAE,EAAC,wBACpC,cACI,GAAG,CAAExB,aAAc,CACnB,IAAI,CAAC,MAAM,CACX,SAAS,CAAEjB,MAAM,CAAC2C,YAAa,CAC/B,WAAW,CAAC,gBAAgB,CAC5B,KAAK,CAAEnC,UAAW,CAClB,SAAS,MACT,QAAQ,CAAE,kBAAC6B,CAAC,QAAK5B,cAAa,CAAC4B,CAAC,CAACO,MAAM,CAACC,KAAK,CAAC,EAAC,EACjD,cACF,YAAK,SAAS,CAAE7C,MAAM,CAACc,WAAY,UAC9BA,WAAW,CAAEiB,GAAG,CAAC,SAACJ,MAAM,CAAEmB,GAAG,qBAC1B,YACI,SAAS,WAAK9C,MAAM,CAACmC,OAAO,aACxBvB,iBAAiB,GAAKkC,GAAG,EAAI9C,MAAM,CAAC+C,WAAW,CAChD,CAEH,OAAO,CAAE,yBAAMb,uBAAsB,CAACP,MAAM,CAAC,EAAC,UAC7CA,MAAM,EAFFmB,GAAG,CAGN,EACT,CAAC,EACA,GACJ,CAEd"},"metadata":{},"sourceType":"module","externalDependencies":[]}