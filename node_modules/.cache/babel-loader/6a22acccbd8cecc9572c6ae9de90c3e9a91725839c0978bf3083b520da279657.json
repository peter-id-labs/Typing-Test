{"ast":null,"code":"import _slicedToArray from\"D:/Belajar/typing-test/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import Header from\"components/Header\";import Test from\"components/Test\";import Result from\"components/Result\";import Footer from\"components/Footer\";import{setTimerId}from\"store/actions\";import{recordTest}from\"helpers/recordTest\";import\"stylesheets/themes.scss\";import CommandPallet from\"components/CommandPallet\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function App(){var _useSelector=useSelector(function(state){return state;}),_useSelector$time=_useSelector.time,timerId=_useSelector$time.timerId,timer=_useSelector$time.timer,_useSelector$word=_useSelector.word,currWord=_useSelector$word.currWord,typedWord=_useSelector$word.typedWord,activeWordRef=_useSelector$word.activeWordRef;var dispatch=useDispatch();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showPallet=_useState2[0],setShowPallet=_useState2[1];useEffect(function(){document.onkeydown=function(e){if(e.ctrlKey&&e.key===\"k\"){setShowPallet(function(s){return!s;});e.preventDefault();}else if(e.key.length===1||e.key===\"Backspace\"||e.key===\"Tab\"){recordTest(e.key,e.ctrlKey);e.preventDefault();}};return function(){document.onkeydown=null;};},[dispatch]);useEffect(function(){var idx=typedWord.length-1;var currWordEl=activeWordRef===null||activeWordRef===void 0?void 0:activeWordRef.current;if(currWordEl){currWordEl.children[idx+1].classList.add(currWord[idx]!==typedWord[idx]?\"wrong\":\"right\");}},[currWord,typedWord,activeWordRef]);useEffect(function(){var idx=typedWord.length;var currWordEl=activeWordRef===null||activeWordRef===void 0?void 0:activeWordRef.current;if(currWordEl&&idx<currWord.length)currWordEl.children[idx+1].classList.remove(\"wrong\",\"right\");},[currWord.length,typedWord,activeWordRef]);useEffect(function(){if(!timer&&timerId){clearInterval(timerId);dispatch(setTimerId(null));}},[dispatch,timer,timerId]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),showPallet&&/*#__PURE__*/_jsx(CommandPallet,{setShowPallet:setShowPallet}),timer?/*#__PURE__*/_jsx(Test,{}):/*#__PURE__*/_jsx(Result,{}),/*#__PURE__*/_jsx(Footer,{})]});}","map":{"version":3,"names":["useEffect","useState","useDispatch","useSelector","Header","Test","Result","Footer","setTimerId","recordTest","CommandPallet","App","state","time","timerId","timer","word","currWord","typedWord","activeWordRef","dispatch","showPallet","setShowPallet","document","onkeydown","e","ctrlKey","key","s","preventDefault","length","idx","currWordEl","current","children","classList","add","remove","clearInterval"],"sources":["D:/Belajar/typing-test/src/App.tsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport Header from \"components/Header\";\r\nimport Test from \"components/Test\";\r\nimport Result from \"components/Result\";\r\nimport Footer from \"components/Footer\";\r\nimport { State } from \"store/reducer\";\r\nimport { setTimerId } from \"store/actions\";\r\nimport { recordTest } from \"helpers/recordTest\";\r\nimport \"stylesheets/themes.scss\";\r\nimport CommandPallet from \"components/CommandPallet\";\r\n\r\nexport default function App() {\r\n    const {\r\n        time: { timerId, timer },\r\n        word: { currWord, typedWord, activeWordRef },\r\n    } = useSelector((state: State) => state);\r\n    const dispatch = useDispatch();\r\n    const [showPallet, setShowPallet] = useState(false);\r\n\r\n    useEffect(() => {\r\n        document.onkeydown = (e) => {\r\n            if (e.ctrlKey && e.key === \"k\") {\r\n                setShowPallet((s) => !s);\r\n                e.preventDefault();\r\n            } else if (\r\n                e.key.length === 1 ||\r\n                e.key === \"Backspace\" ||\r\n                e.key === \"Tab\"\r\n            ) {\r\n                recordTest(e.key, e.ctrlKey);\r\n                e.preventDefault();\r\n            }\r\n        };\r\n        return () => {\r\n            document.onkeydown = null;\r\n        };\r\n    }, [dispatch]);\r\n\r\n    useEffect(() => {\r\n        let idx = typedWord.length - 1;\r\n        const currWordEl = activeWordRef?.current!;\r\n        if (currWordEl) {\r\n            currWordEl.children[idx + 1].classList.add(\r\n                currWord[idx] !== typedWord[idx] ? \"wrong\" : \"right\"\r\n            );\r\n        }\r\n    }, [currWord, typedWord, activeWordRef]);\r\n\r\n    useEffect(() => {\r\n        let idx = typedWord.length;\r\n        const currWordEl = activeWordRef?.current!;\r\n        if (currWordEl && idx < currWord.length)\r\n            currWordEl.children[idx + 1].classList.remove(\"wrong\", \"right\");\r\n    }, [currWord.length, typedWord, activeWordRef]);\r\n\r\n    useEffect(() => {\r\n        if (!timer && timerId) {\r\n            clearInterval(timerId);\r\n            dispatch(setTimerId(null));\r\n        }\r\n    }, [dispatch, timer, timerId]);\r\n\r\n    return (\r\n        <>\r\n            <Header />\r\n            {showPallet && <CommandPallet setShowPallet={setShowPallet} />}\r\n            {timer ? <Test /> : <Result />}\r\n            <Footer />\r\n        </>\r\n    );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}