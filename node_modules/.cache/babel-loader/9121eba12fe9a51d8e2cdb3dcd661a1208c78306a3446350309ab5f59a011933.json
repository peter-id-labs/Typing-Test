{"ast":null,"code":"import _toConsumableArray from\"D:/Belajar/typing-test/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"D:/Belajar/typing-test/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{combineReducers}from\"redux\";import{SET_CHAR,SET_WORD,TIMER_DECREMENT,TIMERID_SET,TIMER_SET,APPEND_TYPED_HISTORY,PREV_WORD,SET_WORDLIST,SET_THEME,SET_TIME,SET_REF,SET_CARET_REF,SET_TYPE}from\"./actions\";export var initialState={preferences:{theme:\"\",timeLimit:0,type:\"\"},word:{currWord:\"\",typedWord:\"\",typedHistory:[],wordList:[],activeWordRef:null,caretRef:null},time:{timer:1,timerId:null}};var timerReducer=function timerReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState.time;var _ref=arguments.length>1?arguments[1]:undefined,type=_ref.type,payload=_ref.payload;switch(type){case TIMER_DECREMENT:return _objectSpread(_objectSpread({},state),{},{timer:state.timer-1});case TIMER_SET:return _objectSpread(_objectSpread({},state),{},{timer:payload});case TIMERID_SET:return _objectSpread(_objectSpread({},state),{},{timerId:payload});default:return state;}};var wordReducer=function wordReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState.word;var _ref2=arguments.length>1?arguments[1]:undefined,type=_ref2.type,payload=_ref2.payload;switch(type){case SET_CHAR:return _objectSpread(_objectSpread({},state),{},{typedWord:payload});case SET_WORD:return _objectSpread(_objectSpread({},state),{},{typedHistory:[].concat(_toConsumableArray(state.typedHistory),[payload])});case APPEND_TYPED_HISTORY:var nextIdx=state.typedHistory.length+1;return _objectSpread(_objectSpread({},state),{},{typedWord:\"\",currWord:state.wordList[nextIdx],typedHistory:[].concat(_toConsumableArray(state.typedHistory),[state.typedWord])});case PREV_WORD:var prevIdx=state.typedHistory.length-1;return _objectSpread(_objectSpread({},state),{},{currWord:state.wordList[prevIdx],typedWord:!payload?state.typedHistory[prevIdx]:\"\",typedHistory:state.typedHistory.splice(0,prevIdx)});case SET_REF:return _objectSpread(_objectSpread({},state),{},{activeWordRef:payload});case SET_CARET_REF:return _objectSpread(_objectSpread({},state),{},{caretRef:payload});case SET_WORDLIST:var areNotWords=payload.some(function(word){return word.includes(\" \");});var shuffledWordList=payload.sort(function(){return Math.random()-0.5;});if(areNotWords)shuffledWordList=payload.flatMap(function(token){return token.split(\" \");});return _objectSpread(_objectSpread({},state),{},{typedWord:\"\",typedHistory:[],currWord:shuffledWordList[0],wordList:shuffledWordList});default:return state;}};var preferenceReducer=function preferenceReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState.preferences;var _ref3=arguments.length>1?arguments[1]:undefined,type=_ref3.type,payload=_ref3.payload;switch(type){case SET_THEME:return _objectSpread(_objectSpread({},state),{},{theme:payload});case SET_TIME:return _objectSpread(_objectSpread({},state),{},{timeLimit:payload});case SET_TYPE:return _objectSpread(_objectSpread({},state),{},{type:payload});default:return state;}};export default combineReducers({time:timerReducer,word:wordReducer,preferences:preferenceReducer});","map":{"version":3,"names":["combineReducers","SET_CHAR","SET_WORD","TIMER_DECREMENT","TIMERID_SET","TIMER_SET","APPEND_TYPED_HISTORY","PREV_WORD","SET_WORDLIST","SET_THEME","SET_TIME","SET_REF","SET_CARET_REF","SET_TYPE","initialState","preferences","theme","timeLimit","type","word","currWord","typedWord","typedHistory","wordList","activeWordRef","caretRef","time","timer","timerId","timerReducer","state","payload","wordReducer","nextIdx","length","prevIdx","splice","areNotWords","some","includes","shuffledWordList","sort","Math","random","flatMap","token","split","preferenceReducer"],"sources":["D:/Belajar/typing-test/src/store/reducer.ts"],"sourcesContent":["import { RefObject } from \"react\";\r\nimport { AnyAction, combineReducers } from \"redux\";\r\nimport {\r\n    SET_CHAR,\r\n    SET_WORD,\r\n    TIMER_DECREMENT,\r\n    TIMERID_SET,\r\n    TIMER_SET,\r\n    APPEND_TYPED_HISTORY,\r\n    PREV_WORD,\r\n    SET_WORDLIST,\r\n    SET_THEME,\r\n    SET_TIME,\r\n    SET_REF,\r\n    SET_CARET_REF,\r\n    SET_TYPE,\r\n} from \"./actions\";\r\n\r\nexport interface State {\r\n    preferences: {\r\n        theme: string;\r\n        timeLimit: number;\r\n        type: string;\r\n    };\r\n    word: {\r\n        currWord: string;\r\n        typedWord: string;\r\n        typedHistory: string[];\r\n        wordList: string[];\r\n        activeWordRef: RefObject<HTMLDivElement> | null;\r\n        caretRef: RefObject<HTMLSpanElement> | null;\r\n    };\r\n    time: {\r\n        timer: number;\r\n        timerId: NodeJS.Timeout | null;\r\n    };\r\n}\r\n\r\nexport const initialState: State = {\r\n    preferences: {\r\n        theme: \"\",\r\n        timeLimit: 0,\r\n        type: \"\",\r\n    },\r\n    word: {\r\n        currWord: \"\",\r\n        typedWord: \"\",\r\n        typedHistory: [],\r\n        wordList: [],\r\n        activeWordRef: null,\r\n        caretRef: null,\r\n    },\r\n    time: {\r\n        timer: 1,\r\n        timerId: null,\r\n    },\r\n};\r\n\r\nconst timerReducer = (\r\n    state = initialState.time,\r\n    { type, payload }: AnyAction\r\n) => {\r\n    switch (type) {\r\n        case TIMER_DECREMENT:\r\n            return { ...state, timer: state.timer - 1 };\r\n        case TIMER_SET:\r\n            return { ...state, timer: payload };\r\n        case TIMERID_SET:\r\n            return { ...state, timerId: payload };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nconst wordReducer = (\r\n    state = initialState.word,\r\n    { type, payload }: AnyAction\r\n) => {\r\n    switch (type) {\r\n        case SET_CHAR:\r\n            return { ...state, typedWord: payload };\r\n        case SET_WORD:\r\n            return { ...state, typedHistory: [...state.typedHistory, payload] };\r\n        case APPEND_TYPED_HISTORY:\r\n            const nextIdx = state.typedHistory.length + 1;\r\n            return {\r\n                ...state,\r\n                typedWord: \"\",\r\n                currWord: state.wordList[nextIdx],\r\n                typedHistory: [...state.typedHistory, state.typedWord],\r\n            };\r\n        case PREV_WORD:\r\n            const prevIdx = state.typedHistory.length - 1;\r\n            return {\r\n                ...state,\r\n                currWord: state.wordList[prevIdx],\r\n                typedWord: !payload ? state.typedHistory[prevIdx] : \"\",\r\n                typedHistory: state.typedHistory.splice(0, prevIdx),\r\n            };\r\n        case SET_REF:\r\n            return {\r\n                ...state,\r\n                activeWordRef: payload,\r\n            };\r\n        case SET_CARET_REF:\r\n            return {\r\n                ...state,\r\n                caretRef: payload,\r\n            };\r\n        case SET_WORDLIST:\r\n            const areNotWords = payload.some((word: string) =>\r\n                word.includes(\" \")\r\n            );\r\n            var shuffledWordList: string[] = payload.sort(\r\n                () => Math.random() - 0.5\r\n            );\r\n            if (areNotWords)\r\n                shuffledWordList = payload.flatMap((token: string) =>\r\n                    token.split(\" \")\r\n                );\r\n            return {\r\n                ...state,\r\n                typedWord: \"\",\r\n                typedHistory: [],\r\n                currWord: shuffledWordList[0],\r\n                wordList: shuffledWordList,\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nconst preferenceReducer = (\r\n    state = initialState.preferences,\r\n    { type, payload }: AnyAction\r\n) => {\r\n    switch (type) {\r\n        case SET_THEME:\r\n            return { ...state, theme: payload };\r\n        case SET_TIME:\r\n            return {\r\n                ...state,\r\n                timeLimit: payload,\r\n            };\r\n        case SET_TYPE:\r\n            return {\r\n                ...state,\r\n                type: payload,\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default combineReducers({\r\n    time: timerReducer,\r\n    word: wordReducer,\r\n    preferences: preferenceReducer,\r\n});\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}