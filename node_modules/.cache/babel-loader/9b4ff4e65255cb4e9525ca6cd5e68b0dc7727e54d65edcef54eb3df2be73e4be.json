{"ast":null,"code":"import _toConsumableArray from\"D:/Belajar/typing-test/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"D:/Belajar/typing-test/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{resetTest}from\"helpers/resetTest\";import{useEffect,useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{setTheme,setTime,setType,setWordList,timerSet}from\"store/actions\";import\"stylesheets/Header.scss\";import\"stylesheets/AnimatedTheme.scss\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var options={time:[15,30,45,60,120],theme:[\"default\",\"mkbhd\",\"mocha\",\"coral\",\"ocean\",\"azure\",\"forest\",\"rose-milk\",\"amethyst\",\"amber\",\"terminal\",\"vscode\",\"mountain\",\"pink-sky\",\"red-season\"],type:[\"words\",\"wordsindo\",\"sentences\",\"numbers\",\"got\",\"javascript\",\"python\"]};export default function Header(){var _useSelector=useSelector(function(state){return state;}),_useSelector$preferen=_useSelector.preferences,timeLimit=_useSelector$preferen.timeLimit,theme=_useSelector$preferen.theme,type=_useSelector$preferen.type,timerId=_useSelector.time.timerId;var _useState=useState(),_useState2=_slicedToArray(_useState,2),animationProps=_useState2[0],setAnimationProps=_useState2[1];var dispatch=useDispatch();useEffect(function(){var theme=localStorage.getItem(\"theme\")||\"default\";var type=localStorage.getItem(\"type\")||\"words\";var time=parseInt(localStorage.getItem(\"time\")||\"60\",10);import(\"wordlists/\".concat(type,\".json\")).then(function(words){return dispatch(setWordList(words.default));});dispatch(timerSet(time));dispatch(setType(type));dispatch(setTime(time));dispatch(setTheme(theme));},[dispatch]);// Set Theme\nuseEffect(function(){if(theme){var _document$querySelect,_document$querySelect2,_document$body$childr;(_document$querySelect=document.querySelector(\".theme\"))===null||_document$querySelect===void 0?void 0:_document$querySelect.childNodes.forEach(function(el){if(el instanceof HTMLButtonElement)el.classList.remove(\"selected\");});(_document$querySelect2=document.querySelector(\"button[value=\\\"\".concat(theme,\"\\\"]\")))===null||_document$querySelect2===void 0?void 0:_document$querySelect2.classList.add(\"selected\");(_document$body$childr=document.body.children[1].classList).remove.apply(_document$body$childr,_toConsumableArray(options.theme));document.body.children[1].classList.add(theme);localStorage.setItem(\"theme\",theme);}},[dispatch,theme]);// Set Time\nuseEffect(function(){if(timeLimit!==0){var _document$querySelect3,_document$querySelect4;(_document$querySelect3=document.querySelector(\".time\"))===null||_document$querySelect3===void 0?void 0:_document$querySelect3.childNodes.forEach(function(el){if(el instanceof HTMLButtonElement)el.classList.remove(\"selected\");});(_document$querySelect4=document.querySelector(\"button[value=\\\"\".concat(timeLimit,\"\\\"]\")))===null||_document$querySelect4===void 0?void 0:_document$querySelect4.classList.add(\"selected\");dispatch(setTime(timeLimit));localStorage.setItem(\"time\",\"\".concat(timeLimit));resetTest();}},[dispatch,timeLimit]);// Set Type\nuseEffect(function(){if(type!==\"\"){var _document$querySelect5,_document$querySelect6;(_document$querySelect5=document.querySelector(\".type\"))===null||_document$querySelect5===void 0?void 0:_document$querySelect5.childNodes.forEach(function(el){if(el instanceof HTMLButtonElement)el.classList.remove(\"selected\");});(_document$querySelect6=document.querySelector(\"button[value=\\\"\".concat(type,\"\\\"]\")))===null||_document$querySelect6===void 0?void 0:_document$querySelect6.classList.add(\"selected\");dispatch(setType(type));localStorage.setItem(\"type\",type);resetTest();}},[dispatch,type]);var handleOptions=function handleOptions(_ref){var target=_ref.target,clientX=_ref.clientX,clientY=_ref.clientY;if(target instanceof HTMLButtonElement&&target.dataset.option){if(target.value===theme||+target.value===timeLimit){target.blur();return;}switch(target.dataset.option){case\"theme\":setTimeout(function(){dispatch(setTheme(target.value));},750);setAnimationProps({top:clientY,left:clientX,theme:target.value});break;case\"time\":dispatch(setTime(+target.value));break;case\"type\":dispatch(setType(target.value));break;}target.blur();}};return/*#__PURE__*/_jsxs(\"header\",{className:timerId?\"hidden\":undefined,children:[/*#__PURE__*/_jsx(\"a\",{href:\".\",className:\"brand\",children:\"typing-test\"}),/*#__PURE__*/_jsx(\"div\",{className:\"buttons\",children:Object.entries(options).map(function(_ref2){var _ref3=_slicedToArray(_ref2,2),option=_ref3[0],choices=_ref3[1];return/*#__PURE__*/_jsxs(\"div\",{className:option,children:[option,\":\",choices.map(function(choice){return/*#__PURE__*/_jsx(\"button\",{className:\"mini\",\"data-option\":option,value:choice,onClick:function onClick(e){return handleOptions(e);},children:choice},choice);})]},option);})}),animationProps?/*#__PURE__*/_jsx(\"div\",{className:\"animated-theme \".concat(animationProps.theme),style:{top:animationProps.top,left:animationProps.left},onAnimationEnd:function onAnimationEnd(){return setAnimationProps(null);}}):null]});}","map":{"version":3,"names":["resetTest","useEffect","useState","useDispatch","useSelector","setTheme","setTime","setType","setWordList","timerSet","options","time","theme","type","Header","state","preferences","timeLimit","timerId","animationProps","setAnimationProps","dispatch","localStorage","getItem","parseInt","then","words","default","document","querySelector","childNodes","forEach","el","HTMLButtonElement","classList","remove","add","body","children","setItem","handleOptions","target","clientX","clientY","dataset","option","value","blur","setTimeout","top","left","undefined","Object","entries","map","choices","choice","e"],"sources":["D:/Belajar/typing-test/src/components/Header.tsx"],"sourcesContent":["import { resetTest } from \"helpers/resetTest\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n    setTheme,\r\n    setTime,\r\n    setType,\r\n    setWordList,\r\n    timerSet,\r\n} from \"store/actions\";\r\nimport { State } from \"store/reducer\";\r\nimport \"stylesheets/Header.scss\";\r\nimport \"stylesheets/AnimatedTheme.scss\";\r\n\r\nexport interface Options {\r\n    time: number[];\r\n    theme: string[];\r\n    type: string[];\r\n}\r\n\r\ninterface AnimationProps {\r\n    top: number;\r\n    left: number;\r\n    theme: string;\r\n}\r\n\r\nexport const options: Options = {\r\n    time: [15, 30, 45, 60, 120],\r\n    theme: [\r\n        \"default\",\r\n        \"mkbhd\",\r\n        \"mocha\",\r\n        \"coral\",\r\n        \"ocean\",\r\n        \"azure\",\r\n        \"forest\",\r\n        \"rose-milk\",\r\n        \"amethyst\",\r\n        \"amber\",\r\n        \"terminal\",\r\n        \"vscode\",\r\n        \"mountain\",\r\n        \"pink-sky\",\r\n        \"red-season\",\r\n    ],\r\n    type: [\"words\", \"wordsindo\", \"sentences\", \"numbers\", \"got\", \"javascript\", \"python\"],\r\n};\r\n\r\nexport default function Header() {\r\n    const {\r\n        preferences: { timeLimit, theme, type },\r\n        time: { timerId },\r\n    } = useSelector((state: State) => state);\r\n    const [animationProps, setAnimationProps] =\r\n        useState<AnimationProps | null>();\r\n    const dispatch = useDispatch();\r\n\r\n    useEffect(() => {\r\n        const theme = localStorage.getItem(\"theme\") || \"default\";\r\n        const type = localStorage.getItem(\"type\") || \"words\";\r\n        const time = parseInt(localStorage.getItem(\"time\") || \"60\", 10);\r\n        import(`wordlists/${type}.json`).then((words) =>\r\n            dispatch(setWordList(words.default))\r\n        );\r\n        dispatch(timerSet(time));\r\n        dispatch(setType(type));\r\n        dispatch(setTime(time));\r\n        dispatch(setTheme(theme));\r\n    }, [dispatch]);\r\n\r\n    // Set Theme\r\n    useEffect(() => {\r\n        if (theme) {\r\n            document.querySelector(\".theme\")?.childNodes.forEach((el) => {\r\n                if (el instanceof HTMLButtonElement)\r\n                    el.classList.remove(\"selected\");\r\n            });\r\n            document\r\n                .querySelector(`button[value=\"${theme}\"]`)\r\n                ?.classList.add(\"selected\");\r\n            document.body.children[1].classList.remove(...options.theme);\r\n            document.body.children[1].classList.add(theme);\r\n            localStorage.setItem(\"theme\", theme);\r\n        }\r\n    }, [dispatch, theme]);\r\n\r\n    // Set Time\r\n    useEffect(() => {\r\n        if (timeLimit !== 0) {\r\n            document.querySelector(\".time\")?.childNodes.forEach((el) => {\r\n                if (el instanceof HTMLButtonElement)\r\n                    el.classList.remove(\"selected\");\r\n            });\r\n            document\r\n                .querySelector(`button[value=\"${timeLimit}\"]`)\r\n                ?.classList.add(\"selected\");\r\n            dispatch(setTime(timeLimit));\r\n            localStorage.setItem(\"time\", `${timeLimit}`);\r\n            resetTest();\r\n        }\r\n    }, [dispatch, timeLimit]);\r\n\r\n    // Set Type\r\n    useEffect(() => {\r\n        if (type !== \"\") {\r\n            document.querySelector(\".type\")?.childNodes.forEach((el) => {\r\n                if (el instanceof HTMLButtonElement)\r\n                    el.classList.remove(\"selected\");\r\n            });\r\n            document\r\n                .querySelector(`button[value=\"${type}\"]`)\r\n                ?.classList.add(\"selected\");\r\n            dispatch(setType(type));\r\n            localStorage.setItem(\"type\", type);\r\n            resetTest();\r\n        }\r\n    }, [dispatch, type]);\r\n\r\n    const handleOptions = ({ target, clientX, clientY }: React.MouseEvent) => {\r\n        if (target instanceof HTMLButtonElement && target.dataset.option) {\r\n            if (target.value === theme || +target.value === timeLimit) {\r\n                target.blur();\r\n                return;\r\n            }\r\n            switch (target.dataset.option) {\r\n                case \"theme\":\r\n                    setTimeout(() => {\r\n                        dispatch(setTheme(target.value));\r\n                    }, 750);\r\n                    setAnimationProps({\r\n                        top: clientY,\r\n                        left: clientX,\r\n                        theme: target.value,\r\n                    });\r\n                    break;\r\n                case \"time\":\r\n                    dispatch(setTime(+target.value));\r\n                    break;\r\n                case \"type\":\r\n                    dispatch(setType(target.value));\r\n                    break;\r\n            }\r\n            target.blur();\r\n        }\r\n    };\r\n\r\n    return (\r\n        <header className={timerId ? \"hidden\" : undefined}>\r\n            <a href=\".\" className=\"brand\">\r\n                typing-test\r\n            </a>\r\n            <div className=\"buttons\">\r\n                {Object.entries(options).map(([option, choices]) => (\r\n                    <div key={option} className={option}>\r\n                        {option}:\r\n                        {choices.map((choice: string) => (\r\n                            <button\r\n                                className=\"mini\"\r\n                                key={choice}\r\n                                data-option={option}\r\n                                value={choice}\r\n                                onClick={(e) => handleOptions(e)}>\r\n                                {choice}\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n                ))}\r\n            </div>\r\n            {animationProps ? (\r\n                <div\r\n                    className={`animated-theme ${animationProps.theme}`}\r\n                    style={{\r\n                        top: animationProps.top,\r\n                        left: animationProps.left,\r\n                    }}\r\n                    onAnimationEnd={() => setAnimationProps(null)}></div>\r\n            ) : null}\r\n        </header>\r\n    );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}